<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LGT Obstetric Anaesthesia – Quick Reference</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#005EB8">

<style>
:root {
  --nhs-blue: #005EB8;
  --nhs-dark: #003087;
  --nhs-grey: #425563;
  --bg: #f4f6f8;
  --card: #ffffff;
}

body {
  margin: 0;
  font-family: Arial, Helvetica, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: var(--bg);
  color: #212121;
  line-height: 1.45;
}

header {
  background: var(--nhs-blue);
  color: white;
  padding: 0.75rem 1rem 1rem;
  text-align: center;
}

.logo {
  width: 64px;
  margin: 0 auto 0.3rem;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 1rem;
}

.nav-button {
  width: 100%;
  background: var(--nhs-blue);
  color: white;
  border: none;
  padding: 0.9rem 1rem;
  margin-bottom: 0.3rem;
  font-size: 1.05rem;
  font-weight: 700;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.nav-button.secondary,
.nav-button.open {
  background: var(--nhs-dark);
}

.chevron {
  width: 0.6rem;
  height: 0.6rem;
  border-right: 2px solid white;
  border-bottom: 2px solid white;
  transform: rotate(-45deg);
  transition: transform 0.25s ease;
}

.nav-button.open .chevron {
  transform: rotate(45deg);
}

.section {
  background: var(--card);
  border-radius: 6px;
  margin-bottom: 0.75rem;
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transition: max-height 0.45s ease, opacity 0.25s ease;
}

.section.open {
  max-height: 5000px;
  opacity: 1;
}

details {
  padding: 0.75rem 1rem;
}

summary {
  font-weight: 700;
  color: var(--nhs-dark);
  cursor: pointer;
}

.footer {
  text-align: center;
  font-size: 0.8rem;
  color: var(--nhs-grey);
  padding: 1rem;
}
</style>
</head>

<body>

<header>
  <img src="icon.png" alt="App logo" class="logo">

  <h1>LGT Obstetric Anaesthesia</h1>
  <p>Quick Reference Guide</p>
</header>

<div class="container">

<button class="nav-button" data-target="lscs">
  <span>LSCS</span><span class="chevron"></span>
</button>
<div id="lscs" class="section">
  <!-- CONTENT UNCHANGED -->
  <details><summary>LSCS – Regional Anaesthesia (Spinal)</summary><ul>
    <li>14–16G IV access, warmed fluids running</li>
    <li>2.2–2.5 ml 0.5% heavy bupivacaine + 300 mcg diamorphine</li>
    <li>Phenylephrine infusion 50mcg/ml started at 40ml/hr</li>
    <li>Aiming bilateral sensory block T4–S3</li>
  </ul></details>

  <details><summary>LSCS – CSE</summary><ul>
    <li>Consider for prolonged surgery or complex medical conditions</li>
    <li>Reduce spinal dose in cardiac disease, short stature, obesity</li>
    <li>Phenylephrine as above</li>
    <li>Tegaderm dressing + mefix strip</li>
  </ul></details>

  <details><summary>LSCS – Epidural Top-Up</summary><ul>
    <li>Only if functioning adequately. If not, remove and place spinal</li>
    <li>0.5% bupivacaine or 0.75% ropivacaine 15–20 ml in 5 ml increments</li>
    <li>OR 2% lidocaine + adrenaline 1:200,000</li>
    <li>Add fentanyl 50–100 mcg</li>
    <li>Diamorphine 3 mg (or PF morphine 3 mg) at end</li>
  </ul></details>
</div>

<button class="nav-button" data-target="procedures">
  <span>Other Obstetric Procedures</span><span class="chevron"></span>
</button>
<div id="procedures" class="section">
  <details><summary>Trial of Forceps</summary><ul>
    <li>Anaesthetic as for LSCS (block to T4)</li>
    <li>Potential for conversion to LSCS</li>
    <li>No prophylactic antibiotics</li>
  </ul></details>

  <details><summary>Manual Removal of Placenta</summary><ul>
    <li>If unstable → GA</li>
    <li>If stable → neuraxial (T6)</li>
    <li>Spinal: 2 ml 0.5% heavy bupivacaine ± fentanyl</li>
  </ul></details>

  <details><summary>Perineal Tear Repair</summary><ul>
    <li>Sacral block required</li>
    <li>Epidural top-up or spinal 1.5–2 ml heavy bupivacaine</li>
    <li>Remain sitting ~3 minutes</li>
  </ul></details>
</div>

<button class="nav-button secondary" data-target="emergencies">
  <span>Emergencies</span><span class="chevron"></span>
</button>
<div id="emergencies" class="section">
  <details><summary>Post-Partum Haemorrhage</summary><ul>
    <li>High-flow O₂</li>
    <li>2 large-bore IV cannulae</li>
    <li>TXA 1g IV early</li>
    <li>Activate major haemorrhage protocol</li>
  </ul></details>

  <details><summary>Eclampsia</summary><ul>
    <li>Airway protection</li>
    <li>Magnesium sulphate loading + infusion</li>
    <li>Control severe hypertension</li>
  </ul></details>

  <details><summary>High Spinal / Total Spinal</summary><ul>
    <li>Immediate airway support</li>
    <li>Left lateral tilt</li>
    <li>Vasopressors and ventilation</li>
  </ul></details>
</div>

</div>

<div class="footer">
Version 2026-02-07 · Based on LGT Obstetric Anaesthesia Guidelines & EAOAG Quick Reference (2018)
</div>

<script>
(function () {
  const buttons = document.querySelectorAll(".nav-button");

  function closeAll() {
    document.querySelectorAll(".section").forEach(s => s.classList.remove("open"));
    buttons.forEach(b => b.classList.remove("open"));
    localStorage.removeItem("openSection");
  }

  buttons.forEach(button => {
    button.addEventListener("click", () => {
      const section = button.nextElementSibling;
      if (!section || !section.classList.contains("section")) return;

      const isOpen = section.classList.contains("open");
      closeAll();

      if (!isOpen) {
        section.classList.add("open");
        button.classList.add("open");
        localStorage.setItem("openSection", button.dataset.target);
        button.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
  });

  const last = localStorage.getItem("openSection");
  if (last) {
    const btn = document.querySelector(`.nav-button[data-target="${last}"]`);
    if (btn) btn.click();
  }

  // SAFE PWA REGISTRATION
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
  }
})();
</script>

</body>
</html>
